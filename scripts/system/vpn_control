#!/bin/bash

MODE="$1"

function vpn_enabled() {
  sudo wg show wg0 | grep wg0
}

function show_status() {
  if vpn_enabled; then
    dunstify VPN "Enabled"
  else
    dunstify VPN "Disabled"
  fi
}

case "$MODE" in
  "on")
    if ! vpn_enabled; then
      sudo wg-quick up wg0
      show_status
    fi
    ;;
  "off")
    if vpn_enabled; then
      sudo wg-quick down wg0
      show_status
    fi
    ;;
  *)
    dunstify VPN 'Unknown mode'
    ;;
esac

#!/bin/bash 

export XAUTHORITY=/run/user/1000/gdm/Xauthority
export DISPLAY=:1

MONITOR=`xrandr | grep -P -o "^HDMI(-1)?-2"`
LAPTOP=`xrandr | grep -P -o "^eDP(-1)?-1"`

function ActivateHDMI {
    echo "Switching to $MONITOR"
    xrandr --output $LAPTOP --primary --auto --output $MONITOR --left-of $LAPTOP --auto
}
function DeactivateHDMI {
    echo "Switching to $LAPTOP"
    xrandr --output $LAPTOP --primary --auto --output $MONITOR --off
}

function HDMIConnected {
	! xrandr | grep $MONITOR | grep disconnected
}

if HDMIConnected
then
	ActivateHDMI
else
	DeactivateHDMI
fi

sleep 1
i3-msg restart
